# @package hydra
# https://hydra.cc/docs/configure_hydra/intro/

# enable color logging
defaults:
  - _self_

# Output directory, generated dynamically on each run.
# We route all runs through a structured experiments hierarchy under `outputs/`.
run:
  dir: ${paths.experiments_root}/${experiment.kind}/${experiment.task}/${experiment.name}/${experiment.run_id}

# Multirun (sweeps) live alongside single runs under the same experiment family.
sweep:
  dir: ${paths.experiments_root}/${experiment.kind}/${experiment.task}/${experiment.name}/multirun
  subdir: ${now:%Y%m%d_%H%M%S}_${hydra.job.num}

job:
  chdir: false

job_logging:
  handlers:
    file:
      # Incorporates fix from https://github.com/facebookresearch/hydra/pull/2242
      # Note: hydra.runtime.output_dir is only available during actual runs, not during compose()
      # For inference, we'll use a relative path instead
      filename: .hydra/${task_name}.log
