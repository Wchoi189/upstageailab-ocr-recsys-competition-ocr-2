version: 1.0

capabilities:
  - logging
  - resources
  - tools

resources:
  - uri: "compass://status"
    name: "Project Status"
    description: "Global project health, phase, and active handoff pointer"
    path: "compass.json"
    mime_type: "application/json"

  - uri: "compass://session"
    name: "Active Session"
    description: "Current work context. DO NOT EDIT MANUALLY. Use manage_session tool."
    path: "active_context/current_session.yml"
    mime_type: "application/yaml"

  - uri: "compass://agents"
    name: "Agent Protocols"
    description: "Rules of engagement and lifecycle for AI agents"
    path: "AGENTS.md"
    mime_type: "text/markdown"

  - uri: "compass://roadmap"
    name: "Active Roadmap"
    description: "The master plan for the current architecture refactor."
    path: "roadmap/ocr-domain-refactor.yml"
    mime_type: "application/yaml"

tools:
  - name: "get_server_info"
    description: "Get information about the Project Compass MCP server"
    inputSchema:
      type: "object"
      properties: {}

  - name: "manage_session"
    description: "Manage project sessions (export, import, list, new). The ONLY way to modify session state."
    inputSchema:
      type: "object"
      properties:
        action:
          type: "string"
          enum: ["export", "import", "list", "new"]
        session_name:
          type: "string"
        note:
          type: "string"
        force:
          type: "boolean"
      required: ["action"]

  - name: "get_effective_config"
    description: "Retrieve the effective (resolved) Hydra configuration."
    inputSchema:
      type: "object"
      properties:
        config_name:
          type: "string"
          default: "train"
        overrides:
          type: "array"
          items:
            type: "string"
