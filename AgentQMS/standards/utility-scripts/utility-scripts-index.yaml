# Utility Scripts Index — Machine-Parseable Format
# Optimized for AI consumption and automated discovery

version: "1.0"
last_updated: "2026-01-11"
total_utilities: 7
priority_utilities: 4

metadata:
  purpose: "Index of reusable utility modules for AI agent discovery"
  format: "YAML (machine-parseable)"
  usage: "Use with grep, YAML parsers, or context systems"
  priority: "AI agents should check this first"

# ============================================================================
# TIER 1: CRITICAL UTILITIES (Highest Priority)
# ============================================================================

tier1:
  count: 4
  utilities:

    config_loader:
      name: "ConfigLoader"
      module: "AgentQMS.tools.utils.config_loader"
      file_path: "AgentQMS/tools/utils/config_loader.py"

      primary_use:
        - "Load YAML configuration files"
        - "Automatic LRU caching (2000x speedup)"
        - "Graceful fallbacks for missing files"

      key_benefit: "~2000x faster than yaml.safe_load() due to LRU caching"

      typical_usage: |
        from AgentQMS.tools.utils.config_loader import ConfigLoader
        loader = ConfigLoader()
        config = loader.load('configs/train.yaml')

      triggers:
        keywords:
          - "load yaml"
          - "load config"
          - "configuration"
          - "yaml file"
          - "cache config"
        patterns:
          - "load.*yaml|config"
          - "read.*configuration"

      features:
        - "LRU cache: 100 item cache with 1h TTL"
        - "Fallback handling: Returns {} if file missing"
        - "Type-safe: Returns dict[str, Any]"
        - "Thread-safe: Uses locking internally"

      when_to_use: "Whenever you load YAML configuration files"

      performance_note: |
        First load: ~5ms (file I/O)
        Cached load: ~0.002ms (memory access)
        Speedup: ~2500x for repeated loads

      documentation:
        quick_reference: "AgentQMS/standards/utility-scripts/by-category/config-loading/config_loader.md"
        examples: "AgentQMS/standards/utility-scripts/by-category/config-loading/examples.md"

    paths:
      name: "Standard Paths Utility"
      module: "AgentQMS.tools.utils.paths"
      file_path: "AgentQMS/tools/utils/paths.py"

      primary_use:
        - "Resolve standard project directories"
        - "No hardcoded paths (maintainable)"
        - "Project-root-aware path resolution"

      standard_directories:
        project_root: "Project repository root"
        data_dir: "data/"
        configs_dir: "configs/"
        outputs_dir: "outputs/"
        models_dir: "data/checkpoints/"
        artifacts_dir: "docs/artifacts/"

      typical_usage: |
        from AgentQMS.tools.utils.paths import get_project_root, get_data_dir
        root = get_project_root()
        data = get_data_dir()

      triggers:
        keywords:
          - "project root"
          - "artifacts directory"
          - "data directory"
          - "standard path"
          - "find path"
          - "get directory"
        patterns:
          - "find.*path|directory"
          - "get.*location"

      when_to_use: "Never hardcode paths; use these functions instead"

      maintenance_note: "Centralized paths = easier refactoring"

      documentation:
        quick_reference: "AgentQMS/standards/utility-scripts/by-category/path-resolution/paths.md"

    timestamps:
      name: "KST Timestamp Utility"
      module: "AgentQMS.tools.utils.timestamps"
      file_path: "AgentQMS/tools/utils/timestamps.py"

      primary_use:
        - "Handle KST (Korea Standard Time) timestamps"
        - "Consistent timestamp formatting"
        - "Artifact metadata timestamps"

      typical_usage: |
        from AgentQMS.tools.utils.timestamps import get_kst_timestamp, format_kst
        now = get_kst_timestamp()
        formatted = format_kst(now, "%Y-%m-%d %H:%M:%S")

      triggers:
        keywords:
          - "timestamp"
          - "kst"
          - "current time"
          - "timezone"
          - "format date"
          - "artifact timestamp"
        patterns:
          - "timestamp|datetime"
          - "kst|korea.*time"

      key_features:
        - "Automatic KST timezone handling"
        - "Multiple format options"
        - "Age calculation for timestamps"

      when_to_use: "For any artifact metadata or logging that needs timestamps"

      documentation:
        quick_reference: "AgentQMS/standards/utility-scripts/by-category/timestamps/timestamps.md"

    git:
      name: "Git Information Utility"
      module: "AgentQMS.tools.utils.git"
      file_path: "AgentQMS/tools/utils/git.py"

      primary_use:
        - "Detect current git branch"
        - "Get current commit hash"
        - "Git state detection"

      typical_usage: |
        from AgentQMS.tools.utils.git import get_current_branch, get_commit_hash
        branch = get_current_branch()
        commit = get_commit_hash()

      triggers:
        keywords:
          - "current branch"
          - "git branch"
          - "commit hash"
          - "git commit"
          - "detect branch"
        patterns:
          - "branch|commit"
          - "git.*current"

      key_features:
        - "Graceful fallbacks if not in git repo"
        - "Subprocess-free when possible"
        - "Cached results"

      when_to_use: "For artifact metadata, debugging, or automated workflows"

      documentation:
        quick_reference: "AgentQMS/standards/utility-scripts/by-category/git/git.md"

# ============================================================================
# TIER 2: SECONDARY UTILITIES (Lower Priority)
# ============================================================================

tier2:
  count: 3
  utilities:

    config:
      name: "Hierarchical Config Merger"
      module: "AgentQMS.tools.utils.config"
      file_path: "AgentQMS/tools/utils/config.py"

      primary_use:
        - "Merge multiple config files hierarchically"
        - "Override base configs with environment/task-specific"

      when_to_use: "Advanced config management with overrides"

      documentation: "AgentQMS/standards/utility-scripts/by-category/config-loading/config.md"

    runtime:
      name: "Runtime Setup Utility"
      module: "AgentQMS.tools.utils.runtime"
      file_path: "AgentQMS/tools/utils/runtime.py"

      primary_use:
        - "Set up runtime paths at application start"
        - "Initialize project environment"

      when_to_use: "Application initialization phase"

      documentation: "AgentQMS/standards/utility-scripts/by-category/runtime/runtime.md"

    sync_github_projects:
      name: "GitHub Projects Sync"
      module: "AgentQMS.tools.utils.sync_github_projects"
      file_path: "AgentQMS/tools/utils/sync_github_projects.py"

      primary_use:
        - "Sync tasks to GitHub Projects board"
        - "Integration with CI/CD workflows"

      when_to_use: "GitHub automation and project management"

      documentation: "AgentQMS/standards/utility-scripts/by-category/github/sync_github_projects.md"

# ============================================================================
# DISCOVERY GUIDE FOR AI AGENTS
# ============================================================================

ai_agent_guide:
  how_to_discover:
    - "Search this file for your task type (grep keywords)"
    - "Check primary_use fields for your use case"
    - "Follow documentation links for examples"
    - "Read quick_reference for implementation details"

  decision_tree:
    loading_config: "→ config_loader (Tier 1, critical)"
    finding_paths: "→ paths (Tier 1, critical)"
    timestamps: "→ timestamps (Tier 1, critical)"
    git_info: "→ git (Tier 1, critical)"
    config_merging: "→ config (Tier 2, optional)"
    startup: "→ runtime (Tier 2, optional)"
    github_automation: "→ sync_github_projects (Tier 2, optional)"

  common_mistakes:
    - "Do NOT write yaml.safe_load() — use ConfigLoader"
    - "Do NOT hardcode paths — use paths utility"
    - "Do NOT use timezone-naive timestamps — use timestamps utility"
    - "Do NOT reinvent git detection — use git utility"

  performance_tip: |
    ConfigLoader gives ~2000x speedup for repeated config loads.
    This matters for agents that process many tasks.

# ============================================================================
# CONTEXT BUNDLING INTEGRATION
# ============================================================================

context_bundling:
  bundle_name: "utility-scripts"
  trigger_keywords:
    - "load yaml"
    - "load config"
    - "configuration"
    - "project root"
    - "artifacts directory"
    - "timestamp"
    - "kst"
    - "current branch"
    - "git commit"
    - "cache"
    - "caching"
    - "performance"

  bundle_file: ".agentqms/plugins/context_bundles/utility-scripts.yaml"

  auto_suggestion: |
    This bundle is automatically suggested when context system
    detects relevant keywords in task descriptions.

# ============================================================================
# IMPLEMENTATION GUIDE
# ============================================================================

quick_start:
  step_1: "Import the utility you need"
  step_2: "Call the function with your parameters"
  step_3: "No additional setup required"

  example_config: |
    from AgentQMS.tools.utils.config_loader import ConfigLoader
    loader = ConfigLoader()
    config = loader.load('configs/train.yaml')  # Cached!

  example_paths: |
    from AgentQMS.tools.utils.paths import get_project_root
    root = get_project_root()

  example_timestamps: |
    from AgentQMS.tools.utils.timestamps import get_kst_timestamp
    now = get_kst_timestamp()

  example_git: |
    from AgentQMS.tools.utils.git import get_current_branch
    branch = get_current_branch()

# ============================================================================
# MAINTENANCE METADATA
# ============================================================================

maintenance:
  location_root: "AgentQMS/tools/utils/"
  test_directory: "tests/utils/"
  owner_team: "AgentQMS"
  last_audit: "2026-01-11"

  import_pattern: "from AgentQMS.tools.utils.<module> import <function>"

  dependencies:
    config_loader: "pyyaml"
    paths: "pathlib"
    timestamps: "datetime, pytz"
    git: "subprocess (fallback available)"

  compatibility: "Python 3.8+"

# ============================================================================
# FILE ORGANIZATION
# ============================================================================

file_structure:
  root: "AgentQMS/standards/utility-scripts/"
  index: "utility-scripts-index.yaml (this file)"
  quick_reference: "quick-reference.md"
  by_category: |
    by-category/
    ├── config-loading/
    │   ├── config_loader.md
    │   ├── config.md
    │   └── examples.md
    ├── path-resolution/
    │   └── paths.md
    ├── timestamps/
    │   └── timestamps.md
    └── git/
        └── git.md

# ============================================================================
# END OF INDEX
# ============================================================================
