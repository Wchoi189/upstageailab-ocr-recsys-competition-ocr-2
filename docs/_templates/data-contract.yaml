# Data Contract Template
# Use for documenting data structures passed between components

data_contract:
  name: string                            # e.g., "InferenceMetadata", "PreprocessingResult"
  version: string                         # e.g., "1.0"

  source_component: string                # Component that creates this data
  target_components: [string]             # Components that consume this data

  schema:
    field_name:                           # Field identifier
      type: string                        # Data type
      required: boolean                   # Must be present
      description: string                 # One-line description
      constraints: [string]               # Validation rules (if any)

  invariants: [string]                    # Rules that must always hold

  backward_compatible: boolean            # True if schema unchanged from previous version

  breaking_changes: [string]              # Changes in this version (if any)

  examples: string                        # One example JSON/YAML block (optional)

# Example:
# data_contract:
#   name: "InferenceMetadata"
#   version: "1.0"
#
#   source_component: "PreprocessingMetadata"
#   target_components: ["PreprocessingPipeline", "PostprocessingPipeline", "PreviewGenerator"]
#
#   schema:
#     original_size:
#       type: "Tuple[int, int]"
#       required: true
#       description: "(width, height) of original image"
#       constraints: ["both > 0"]
#
#     processed_size:
#       type: "Tuple[int, int]"
#       required: true
#       description: "(width, height) of preprocessed image"
#       constraints: ["typically 640x640", "both > 0"]
#
#     padding:
#       type: "Dict[str, int]"
#       required: true
#       description: "Padding applied: top, bottom, left, right"
#       constraints: ["all >= 0"]
#
#     padding_position:
#       type: "Literal['top_left', 'center']"
#       required: true
#       description: "How padding is distributed"
#       constraints: ["must be 'top_left' or 'center'"]
#
#   invariants:
#     - "padding_position='top_left' implies padding.top=0 and padding.left=0"
#     - "sum(processed_size) >= sum(original_size)"
#     - "content_area fits within processed_size"
#
#   backward_compatible: true
#
#   examples: |
#     {
#       "original_size": [1200, 800],
#       "processed_size": [640, 640],
#       "padding": {"top": 0, "bottom": 120, "left": 0, "right": 120},
#       "padding_position": "top_left"
#     }
