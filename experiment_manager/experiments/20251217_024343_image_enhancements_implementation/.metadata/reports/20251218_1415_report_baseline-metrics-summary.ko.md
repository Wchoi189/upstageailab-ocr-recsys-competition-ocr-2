# Phase 1 기준 평가 요약

**날짜**: 2025-12-18  
**실험**: 20251217_024343_image_enhancements_implementation  
**단계**: 1주차 1일차 - 기준 수립  
**상태**: ✅ 완료  

---

## 실행 요약

6개의 최저 성능 이미지에 대한 포괄적인 기준 메트릭을 수립했습니다. **중요 발견**: 100%의 이미지에서 심각한 배경 색상 틴트와 변동이 확인되어 배경 정규화에 우선순위를 부여해야 함을 검증했습니다.

### 주요 발견

| 메트릭 | 값 | 목표 (개선 후) |
|--------|-------|---------------------------|
| **배경 색상 변동** | 36.5 ± 7.8 | < 10 |
| **색상 틴트 점수** | 58.1 ± 11.3 | < 20 |
| **평균 밝기** | 123.9 ± 17.6 | 150-180 |
| **대비** | 36.1 ± 7.5 | > 40 |
| **추정 기울기** | 15.0° ± 32.7° | < 2° |

### 확인된 주요 문제

1. **🔴 심각한 색상 틴트** - 6/6 이미지 (100%)  
   - 평균 틴트 점수: 58.1 (목표: < 20)  
   - BGR 채널 심각한 불균형  
   - 흰색 대신 크림/노란색/회색 배경  

2. **🔴 높은 배경 색상 변동** - 6/6 이미지 (100%)  
   - 평균 변동: 36.5 (목표: < 10)  
   - 이미지 간 배경 톤 불일치  
   - OCR 모델의 특징 추출에 악영향  

3. **⚠️ 텍스트 기울기 감지** - 2/6 이미지 (33.3%)  
   - 이미지 000712 (-4.5°) 및 000732 (-83.1°)  
   - 기울기 보정 구현 필요성 확인 (2주차)  

4. **⚠️ 낮은 대비** - 1/6 이미지 (16.7%)  
   - 이미지 000732 (대비: 29.9)  
   - 배경 정규화 후 2차 우선순위  

---

## 상세 이미지별 분석

### 이미지 000699 ✓ 중간 문제  
- **배경 변동**: 38.5 (높음)  
- **색상 틴트**: 57.8 (심각)  
- **추정 기울기**: 1.0°  
- **주요 문제**: 노란색/크림 틴트, 불균일한 배경  
- **개선 우선순위**: 배경 정규화  

### 이미지 000712 ⚠️ 다중 문제  
- **배경 변동**: 35.6 (높음)  
- **색상 틴트**: 79.0 (심각)  
- **추정 기울기**: -4.5° (중간 기울기)  
- **주요 문제**: 심각한 청록색 틴트, 텍스트 회전  
- **개선 우선순위**: 배경 + 기울기 보정  

### 이미지 000732 🔴 심각한 문제  
- **배경 변동**: 29.9 (높음)  
- **색상 틴트**: 47.9 (심각)  
- **추정 기울기**: -83.1° (극단적 기울기)  
- **대비**: 29.9 (낮음)  
- **주요 문제**: 수직 근접 방향, 낮은 대비, 틴트 배경  
- **개선 우선순위**: 기울기 보정 + 배경 + 대비  

### 이미지 001007 ✓ 중간 문제  
- **배경 변동**: 33.0 (높음)  
- **색상 틴트**: 58.9 (심각)  
- **추정 기울기**: 0.3°  
- **주요 문제**: 노란색 틴트, 배경 변동  
- **개선 우선순위**: 배경 정규화  

### 이미지 001012 ✓ 중간 문제  
- **배경 변동**: 29.8 (높음)  
- **색상 틴트**: 56.7 (심각)  
- **추정 기울기**: -1.0°  
- **주요 문제**: 회색/크림 틴트, 약간의 배경 변동  
- **개선 우선순위**: 배경 정규화  

### 이미지 001161 ⚠️ 높은 변동  
- **배경 변동**: 52.3 (매우 높음)  
- **색상 틴트**: 48.1 (심각)  
- **추정 기울기**: 0.0°  
- **주요 문제**: 극단적 배경 색상 변동, 중간 틴트  
- **개선 우선순위**: 배경 정규화 (어려운 사례)  

---

## Phase 1 기준 목표

### 1주차: 배경 정규화 성공 기준  
- ✅ 평균 배경 색상 변동 감소: 36.5 → **< 10** (최소 72% 감소)  
- ✅ 평균 색상 틴트 점수 감소: 58.1 → **< 20** (최소 66% 감소)  
- ✅ 흰색/근접 흰색 배경 달성: BGR ≈ [240-255, 240-255, 240-255]  
- ✅ 좌표 정렬 유지 (회귀 없음)  
- ✅ 처리 시간: 이미지당 < 50ms  

### 2주차: 텍스트 기울기 보정 성공 기준  
- ✅ 평균 기울기 감소: 15.0° → **< 2°** (87% 감소)  
- ✅ 극단적 회전 처리 (예: 000732 @ -83°)  
- ✅ 종횡비 및 텍스트 가독성 유지  
- ✅ 다각형 매핑을 위한 좌표 변환 추적  

---

## 테스트 전략

### Phase 1 1주차 (2-5일차)

#### 2-3일차: 개선 방법 구현  
1. **그레이 월드 화이트 밸런스**  
2. **에지 기반 배경 추정**  
3. **조명 보정 (형태학적)**  

#### 4일차: 검증  
- 6개 기준 이미지에 3가지 방법 적용  
- 개선 전후 비교 생성  
- 측정 항목:  
  - 배경 변동 감소  
  - 색상 틴트 점수 감소  
  - 시각적 품질 평가  

#### 5일차: 방법 선택  
- 방법별 결과 비교  
- 통합 최적 방법 선택  
- 결정 근거 문서화  
- 2주차 (기울기 보정) 준비  

---

## 데이터 파일

### 생성된 아티팩트

1. **phase1_baseline_metrics.json** (203줄)  
   - 6개 이미지 전체 정량적 메트릭  
   - 픽셀 단위 분석 결과  
   - 문제 플래그 및 심각도 점수  

2. **BASELINE_SUMMARY.md** (이 파일)  
   - 사람이 읽을 수 있는 요약  
   - 개선 우선순위 결정을 위한 지원 자료  

### 소스 데이터  
- 테스트 이미지: `data/zero_prediction_worst_performers/*.jpg` (6개 이미지)  
- 추가 테스트 세트 사용 가능:  
  - 영수증 필터: 28개 이미지  
  - 그림자 제거 필터: 28개 이미지  
  - 그레이 스케일 개선: 6개 이미지  
  - 필터 비교: 28개 이미지  

---

## 다음 작업 (1주차 2일차)

1. **background_normalization.py 구현**  
   - 그레이 월드 방법  
   - 에지 기반 방법  
   - 조명 보정 방법  

2. **테스트 하니스 생성**  
   - 배치 처리 스크립트  
   - 개선 전후 비교 생성기  
   - 개선 효과 메트릭 계산  

3. **예비 테스트 실행**  
   - 각 방법을 이미지 001161 (가장 어려운 사례)에 적용  
   - 시각적 검사  
   - 메트릭 비교  

---

## 검증

✅ 6개 이미지 모두 성공적으로 분석됨  
✅ 메트릭이 예상 문제(틴트, 변동)와 일치  
✅ 정량적 목표 수립 완료  
✅ 개선 우선순위 확인 완료  
✅ 테스트 전략 검증 완료  

**상태**: 1주차 2일차 - 구현 단계로 진행 가능