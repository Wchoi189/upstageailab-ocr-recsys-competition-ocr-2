# @package model
# v5.0 | Purpose: Monolithic DBNet++ Preset (Detection)
# Validated: 2026-01-18 | Deps: ocr.domains.detection
encoder:
  _target_: ocr.core.models.encoder.timm_backbone.TimmBackbone
  model_name: "resnet50"
  pretrained: true
  output_indices: [1, 2, 3, 4]
  in_channels: 3

decoder:
  _target_: ocr.domains.detection.models.decoders.dbpp_decoder.DBPPDecoder
  in_channels: [64, 128, 256, 512]
  inner_channels: 256
  out_channels: 128  # from component_overrides
  use_batch_norm: true
  adaptive: true
  attention: true

head:
  _target_: ocr.domains.detection.models.heads.db_head.DBHead
  in_channels: 128  # matched with decoder out_channels
  upscale: 4        # from component_overrides already matching, but explicit
  binarization_threshold: 0.3
  expand_ratio: 1.5
