{
    "jobDefinitionName": "pseudo-label-processor",
    "type": "container",
    "platformCapabilities": [
        "FARGATE"
    ],
    "containerProperties": {
        "image": "145023108624.dkr.ecr.us-east-1.amazonaws.com/batch-processor:latest",
        "fargatePlatformConfiguration": {
            "platformVersion": "LATEST"
        },
        "resourceRequirements": [
            {
                "type": "VCPU",
                "value": "2"
            },
            {
                "type": "MEMORY",
                "value": "4096"
            }
        ],
        "jobRoleArn": "arn:aws:iam::145023108624:role/BatchProcessorJobRole",
        "executionRoleArn": "arn:aws:iam::145023108624:role/BatchProcessorExecutionRole",
        "networkConfiguration": {
            "assignPublicIp": "ENABLED"
        },
        "environment": [
            {
                "name": "AWS_SECRET_ARN",
                "value": "arn:aws:secretsmanager:us-east-1:145023108624:secret:upstage-api-key"
            },
            {
                "name": "S3_BUCKET",
                "value": "ocr-batch-processing"
            },
            {
                "name": "CHECKPOINT_PREFIX",
                "value": "checkpoints/"
            }
        ],
        "command": [
            "python",
            "-m",
            "runners.batch_pseudo_labels_aws"
        ]
    },
    "retryStrategy": {
        "attempts": 3,
        "evaluateOnExit": [
            {
                "onStatusReason": "Host EC2*",
                "action": "RETRY"
            },
            {
                "onStatusReason": "Task failed to start*",
                "action": "RETRY"
            }
        ]
    },
    "timeout": {
        "attemptDurationSeconds": 7200
    }
}
