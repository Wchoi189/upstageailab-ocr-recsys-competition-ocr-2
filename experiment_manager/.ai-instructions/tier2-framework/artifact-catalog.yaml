---
# Tier 2 - Artifact Catalog
# EDS v1.0 AI-Optimized Artifact Templates

specification_version: "1.0"
source: "EDS v1.0 Section: document_types"
purpose: "Machine-readable artifact templates for AI agents"
audience: "AI agents only (no user-oriented content)"

artifact_types:
  assessment:
    purpose: "Failure analysis with evidence clustering"
    cli_command: "eds generate-assessment --experiment {experiment_id} --slug {slug}"
    frontmatter_template:
      ads_version: "1.0"
      type: "assessment"
      experiment_id: "{experiment_id}"
      phase: "phase_0|phase_1|phase_2|phase_3|phase_4"
      priority: "critical|high|medium|low"
      status: "draft"
      created: "{iso8601_datetime}"
      updated: "{iso8601_datetime}"
      evidence_count: 0
      tags: ["{experiment_focus}", "failure-analysis"]
    required_sections:
      - failure_clusters
      - evidence_samples
      - root_cause
      - next_actions
    format_requirements:
      failure_clusters: "markdown table with columns: cluster_id, pattern, count, severity"
      evidence_samples: "markdown table with columns: sample_id, description, evidence_file, impact"
      root_cause: "bulleted list (no prose)"
      next_actions: "markdown table with columns: action_id, description, priority, owner"
    prohibited_content:
      - "user-oriented explanations"
      - "tutorial phrases"
      - "verbose prose"
      - "conceptual introductions"
    file_pattern: "YYYYMMDD_HHMM_assessment_{slug}.md"
    location: "experiments/{experiment_id}/.metadata/assessments/"
    example: |
      ---
      ads_version: "1.0"
      type: "assessment"
      experiment_id: "20251217_024343_image_enhancements"
      phase: "phase_2"
      priority: "high"
      status: "active"
      created: "2025-12-17T15:30:00Z"
      updated: "2025-12-17T15:30:00Z"
      evidence_count: 12
      tags: ["shadow-removal", "failure-analysis", "phase-2"]
      ---

      ## Failure Clusters

      | cluster_id | pattern | count | severity |
      |------------|---------|-------|----------|
      | FC-001 | Shadow persistence after removal | 8 | high |
      | FC-002 | Over-correction artifacts | 4 | medium |

      ## Evidence Samples

      | sample_id | description | evidence_file | impact |
      |-----------|-------------|---------------|--------|
      | ES-001 | Invoice #45234: shadow remnants | samples/invoice_45234.png | Unreadable text |

      ## Root Cause

      - Insufficient shadow detection threshold
      - Missing boundary refinement step

      ## Next Actions

      | action_id | description | priority | owner |
      |-----------|-------------|----------|-------|
      | NA-001 | Adjust detection threshold | high | experiment |
      | NA-002 | Implement boundary refinement | high | experiment |

  report:
    purpose: "Quantitative metrics comparison"
    cli_command: "eds generate-report --experiment {experiment_id} --slug {slug}"
    frontmatter_template:
      ads_version: "1.0"
      type: "report"
      experiment_id: "{experiment_id}"
      metrics: {}
      baseline: "{baseline_experiment_id}"
      comparison: "improvement|regression|neutral"
      status: "draft"
      created: "{iso8601_datetime}"
      updated: "{iso8601_datetime}"
      tags: ["{experiment_focus}", "metrics"]
    required_sections:
      - metrics_table
      - baseline_comparison
      - statistical_analysis
    format_requirements:
      metrics_table: "markdown table with columns: metric, value, baseline, delta, significance"
      baseline_comparison: "markdown table only (no prose)"
      statistical_analysis: "markdown table with columns: test, statistic, p_value, conclusion"
    prohibited_content:
      - "verbose interpretations"
      - "recommendations prose"
      - "conceptual explanations"
    file_pattern: "YYYYMMDD_HHMM_report_{slug}.md"
    location: "experiments/{experiment_id}/.metadata/reports/"
    example: |
      ---
      ads_version: "1.0"
      type: "report"
      experiment_id: "20251217_024343_image_enhancements"
      metrics:
        accuracy: 0.87
        f1_score: 0.84
      baseline: "20251215_100000_baseline"
      comparison: "improvement"
      status: "active"
      created: "2025-12-18T09:00:00Z"
      updated: "2025-12-18T09:00:00Z"
      tags: ["shadow-removal", "metrics", "week-2"]
      ---

      ## Metrics Table

      | metric | value | baseline | delta | significance |
      |--------|-------|----------|-------|--------------|
      | Accuracy | 0.87 | 0.82 | +0.05 | p<0.01 |
      | F1 Score | 0.84 | 0.79 | +0.05 | p<0.01 |

      ## Baseline Comparison

      | dimension | current | baseline | change |
      |-----------|---------|----------|--------|
      | Shadow detection | 0.89 | 0.84 | +5.9% |
      | Text readability | 0.85 | 0.80 | +6.2% |

      ## Statistical Analysis

      | test | statistic | p_value | conclusion |
      |------|-----------|---------|------------|
      | t-test (accuracy) | 3.24 | 0.008 | significant improvement |

  guide:
    purpose: "Command sequence reproduction"
    cli_command: "eds generate-guide --experiment {experiment_id} --slug {slug}"
    frontmatter_template:
      ads_version: "1.0"
      type: "guide"
      experiment_id: "{experiment_id}"
      commands: []
      prerequisites: []
      status: "draft"
      created: "{iso8601_datetime}"
      updated: "{iso8601_datetime}"
      tags: ["{experiment_focus}", "reproduction"]
    required_sections:
      - command_sequence
      - expected_outputs
      - validation_steps
    format_requirements:
      command_sequence: "bash code blocks (no explanations)"
      expected_outputs: "markdown table with columns: step, output_file, validation"
      validation_steps: "bash code blocks (no explanations)"
    prohibited_content:
      - "conceptual explanations"
      - "tutorial prose"
      - "user-oriented instructions"
    file_pattern: "YYYYMMDD_HHMM_guide_{slug}.md"
    location: "experiments/{experiment_id}/.metadata/guides/"
    example: |
      ---
      ads_version: "1.0"
      type: "guide"
      experiment_id: "20251217_024343_image_enhancements"
      commands:
        - "python train.py --config shadow_removal_v2.yaml"
        - "python evaluate.py --checkpoint outputs/checkpoints/best.ckpt"
      prerequisites:
        - "data/datasets/train/ (1000 samples)"
        - "configs/shadow_removal_v2.yaml"
      status: "active"
      created: "2025-12-17T16:00:00Z"
      updated: "2025-12-17T16:00:00Z"
      tags: ["shadow-removal", "reproduction", "training"]
      ---

      ## Command Sequence

      ```bash
      python train.py --config shadow_removal_v2.yaml --epochs 50
      python evaluate.py --checkpoint outputs/checkpoints/best.ckpt --test-data data/test/
      ```

      ## Expected Outputs

      | step | output_file | validation |
      |------|-------------|------------|
      | train | outputs/checkpoints/best.ckpt | file exists, size > 100MB |
      | evaluate | outputs/metrics.json | accuracy > 0.85 |

      ## Validation Steps

      ```bash
      test -f outputs/checkpoints/best.ckpt && echo "✅ Checkpoint exists"
      jq '.accuracy > 0.85' outputs/metrics.json && echo "✅ Accuracy threshold met"
      ```

  script:
    purpose: "Executable Python/Bash artifact"
    cli_command: "eds generate-script --experiment {experiment_id} --slug {slug}"
    frontmatter_template:
      ads_version: "1.0"
      type: "script"
      experiment_id: "{experiment_id}"
      dependencies: []
      status: "draft"
      created: "{iso8601_datetime}"
      updated: "{iso8601_datetime}"
      tags: ["{experiment_focus}", "automation"]
    required_sections:
      - script_code
      - usage_examples
    format_requirements:
      script_code: "python/bash code blocks with structured comments only"
      usage_examples: "bash code blocks (no prose)"
    prohibited_content:
      - "tutorial explanations"
      - "verbose documentation"
      - "conceptual introductions"
    file_pattern: "YYYYMMDD_HHMM_script_{slug}.md"
    location: "experiments/{experiment_id}/.metadata/scripts/"
    example: |
      ---
      ads_version: "1.0"
      type: "script"
      experiment_id: "20251217_024343_image_enhancements"
      dependencies:
        - "python>=3.8"
        - "opencv-python>=4.5"
      status: "active"
      created: "2025-12-17T17:00:00Z"
      updated: "2025-12-17T17:00:00Z"
      tags: ["shadow-removal", "evaluation", "automation"]
      ---

      ## Script Code

      ```python
      #!/usr/bin/env python3
      # Batch evaluation script for shadow removal experiment

      import cv2
      import json
      from pathlib import Path

      def evaluate_sample(image_path, ground_truth_path):
          # Load images
          pred = cv2.imread(str(image_path))
          gt = cv2.imread(str(ground_truth_path))

          # Compute metrics
          mse = ((pred - gt) ** 2).mean()
          psnr = 10 * np.log10(255**2 / mse)

          return {"mse": float(mse), "psnr": float(psnr)}

      if __name__ == "__main__":
          results = []
          for img in Path("outputs/predictions/").glob("*.png"):
              gt = Path("data/ground_truth/") / img.name
              metrics = evaluate_sample(img, gt)
              results.append({"sample": img.name, **metrics})

          # Save results
          with open("outputs/evaluation_results.json", "w") as f:
              json.dump(results, f, indent=2)
      ```

      ## Usage Examples

      ```bash
      python .metadata/scripts/20251217_1700_script_evaluation.py
      cat outputs/evaluation_results.json | jq '.[] | select(.psnr < 30)'
      ```

usage_instructions:
  for_ai_agents: |
    1. Read this catalog to understand artifact types and required formats
    2. Use CLI commands (not manual creation) to generate artifacts
    3. Follow format_requirements exactly (tables, code blocks, no prose)
    4. Never include prohibited_content (tutorials, verbose prose, conceptual explanations)
    5. Validate generated artifacts using compliance-checker.py

  for_human_developers: "See experiment-tracker/README.md (user-facing documentation)"

validation:
  tool: "python .ai-instructions/schema/compliance-checker.py"
  pre_commit: "automated via .ai-instructions/tier4-workflows/pre-commit-hooks/"
  on_demand: "eds validate --experiment {experiment_id}"
