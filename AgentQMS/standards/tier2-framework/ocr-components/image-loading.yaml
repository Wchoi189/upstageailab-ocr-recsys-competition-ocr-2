ads_version: "1.0"
type: specification
agent: all
tier: 2
priority: high
validates_with: AgentQMS/standards/schemas/compliance-checker.py
compliance_status: pass
last_updated: '2026-01-20'

component: image_loading
description: Handles loading and validation of input images.
role: |
  The entry point for raw data. Responsible for reading image bytes, validating formats, and correcting orientation (EXIF).
critical_logic:
  - id: format-support
    description: |
      Must support: JPG, PNG, BMP, TIFF, WebP.
      Must reject: PDF (handled by separate PDF pipeline), GIF (unless first frame).
  - id: safe-loading
    description: |
      Use 'Pillow' or 'OpenCV' with strict limits on image dimensions (Decompression Bomb protection).
      Max dims default: 10000x10000.
  - id: exif-correction
    description: |
      Must apply EXIF orientation tag (e.g., rotate 90 deg for phone photos) BEFORE any processing.
  - id: channel-standardization
    description: |
      Convert all inputs to BGR (OpenCV standard) or RGB (Pillow standard).
      Current Standard: BGR (np.array).
data_contract:
  input:
    - field: image_source
      type: Union[str, bytes, Path]
      description: File path, url, or raw bytes
  output:
    - field: image_array
      type: np.ndarray
      description: BGR image array (H, W, 3)
