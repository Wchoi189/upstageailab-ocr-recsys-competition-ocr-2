{% if few_shot_examples %}
## Few-Shot Examples

Here are some example analyses for reference:

{% for example in few_shot_examples %}
### Example {{ loop.index }}
**Image:** {{ example.image_id }}
**Description:** {{ example.description }}
**Analysis:** {{ example.analysis }}

{% endfor %}
---
{% endif %}

Compare the original and processed images to identify improvements, regressions, or changes.

## Task

Examine both images side-by-side and provide a detailed comparison.

{% if via_annotations %}
## Annotations

The user has provided manual annotations:
{% for annotation in via_annotations %}
- {{ annotation.label }}: {{ annotation.description }}
{% endfor %}

Please consider these annotations in your analysis.
{% endif %}

## Analysis Focus

1. **Transformation Quality**: Assess:
   - How well was the transformation applied?
   - Are there artifacts introduced?
   - Is the output geometrically correct?
   - Are proportions maintained?

2. **Improvements**: Identify:
   - What aspects improved?
   - Quality enhancements
   - Better alignment or positioning
   - Enhanced clarity or contrast

3. **Regressions**: Identify:
   - What aspects got worse?
   - New artifacts introduced
   - Loss of information
   - Quality degradation

4. **Overall Assessment**: Provide:
   - Overall transformation success
   - Recommendation for use
   - Critical issues if any

{% if initial_description %}
## Initial Description

The user provided this initial description:
"{{ initial_description }}"

Use this as context for your analysis.
{% endif %}

## Output Format

Provide a structured comparison in the following format:

- **Transformation Quality:** [Assessment of transformation]
- **Improvements:** [List of improvements]
- **Regressions:** [List of regressions]
- **Overall Assessment:** [Summary and recommendation]
