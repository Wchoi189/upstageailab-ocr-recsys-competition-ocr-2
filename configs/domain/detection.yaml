# @package _group_

# Text Detection Domain Configuration
# Use with: python runners/train.py +domain=detection

defaults:
  - /global/default
  # Rule: Alias the architecture file to 'architectures'
  # - /model/architectures/dbnet_atomic
  - /model/architectures/dbnet_atomic
  # - /data/datasets/canonical
  - /data/datasets/canonical
  # - /data/transforms/document_geometry@document_geometry
  # - /data/transforms/image_enhancement@image_enhancement
  - _self_

# Rule: _self_ at bottom ensures domain-specific overrides win
# Domain-specific logic
task: detection
batch_size: 16
skip_test: true

model:
  type: detection
  task_type: detection
  # Override specific components here
  head:
    binarization_threshold: 0.4
  # Loss function for detection task
  loss:
    _target_: ocr.core.models.loss.db_loss.DBLoss
    alpha: 1.0
    beta: 10.0
    ohem_ratio: 3.0

data:
  task_type: detection

# ============================================================================
# Domain Isolation - Nullify Other Domains
# ============================================================================
recognition: null
max_label_length: null
charset: null
decode_mode: null
beam_width: null

kie: null
max_entities: null
relation_types: null
entity_categories: null
linking_mode: null
