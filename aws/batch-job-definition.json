{
    "jobDefinitionName": "pseudo-label-processor",
    "type": "container",
    "platformCapabilities": [
        "FARGATE"
    ],
    "containerProperties": {
        "image": "<ECR_URI>:latest",
        "fargatePlatformConfiguration": {
            "platformVersion": "LATEST"
        },
        "resourceRequirements": [
            {
                "type": "VCPU",
                "value": "2"
            },
            {
                "type": "MEMORY",
                "value": "4096"
            }
        ],
        "jobRoleArn": "<JOB_ROLE_ARN>",
        "executionRoleArn": "<EXEC_ROLE_ARN>",
        "networkConfiguration": {
            "assignPublicIp": "ENABLED"
        },
        "environment": [
            {
                "name": "AWS_SECRET_ARN",
                "value": "<SECRET_ARN>"
            },
            {
                "name": "S3_BUCKET",
                "value": "<S3_BUCKET>"
            },
            {
                "name": "CHECKPOINT_PREFIX",
                "value": "checkpoints/"
            }
        ],
        "command": [
            "python",
            "-m",
            "runners.batch_pseudo_labels_aws"
        ]
    },
    "retryStrategy": {
        "attempts": 3,
        "evaluateOnExit": [
            {
                "onStatusReason": "Host EC2*",
                "action": "RETRY"
            },
            {
                "onStatusReason": "Task failed to start*",
                "action": "RETRY"
            }
        ]
    },
    "timeout": {
        "attemptDurationSeconds": 7200
    }
}
