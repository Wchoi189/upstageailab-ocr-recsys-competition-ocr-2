{% if few_shot_examples %}
## Few-Shot Examples

Here are some example analyses for reference:

{% for example in few_shot_examples %}
### Example {{ loop.index }}
**Image:** {{ example.image_id }}
**Description:** {{ example.description }}
**Analysis:** {{ example.analysis }}

{% endfor %}
---
{% endif %}

Analyze the source input image to identify unique properties that may affect processing.

## Task

Examine the input image and describe its characteristics that could impact processing quality or cause failures.

{% if via_annotations %}
## Annotations

The user has provided manual annotations:
{% for annotation in via_annotations %}
- {{ annotation.label }}: {{ annotation.description }}
{% endfor %}

Please consider these annotations in your analysis.
{% endif %}

## Analysis Focus

1. **ROI Coverage**: Assess:
   - How much of the frame does the subject fill?
   - Is the ROI centered or off-center?
   - Are there multiple subjects or a single focus?
   - Is the ROI clearly defined or ambiguous?

2. **Contrast/Lighting**: Evaluate:
   - Contrast between foreground and background
   - Lighting conditions (bright, dim, uneven)
   - Shadow presence and impact
   - Color saturation levels
   - Exposure quality

3. **Geometry**: Examine:
   - Is the image already cropped or rectified?
   - Perspective angle (straight-on, angled, extreme)
   - Aspect ratio and orientation
   - Edge conditions (touching borders, isolated)
   - Geometric complexity

{% if initial_description %}
## Initial Description

The user provided this initial description:
"{{ initial_description }}"

Use this as context for your analysis.
{% endif %}

## Output Format

Provide a structured analysis in the following format:

- **ROI Coverage:** [Description of subject coverage]
- **Contrast/Lighting:** [Lighting and contrast assessment]
- **Geometry:** [Geometric characteristics]
