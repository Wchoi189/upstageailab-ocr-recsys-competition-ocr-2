---
# TypeScript Types Contract
# Source: apps/ocr-inference-console/src/contexts/InferenceContext.tsx

InferenceOptions:
  location: "src/contexts/InferenceContext.tsx"
  fields:
    enablePerspectiveCorrection: "boolean"
    displayMode: "string"
    enableGrayscale: "boolean"
    enableBackgroundNormalization: "boolean"
    enableSepiaEnhancement: "boolean"
    confidenceThreshold: "number"
    nmsThreshold: "number"
  defaults:
    enablePerspectiveCorrection: false
    displayMode: "corrected"
    enableGrayscale: false
    enableBackgroundNormalization: false
    enableSepiaEnhancement: false
    confidenceThreshold: 0.1
    nmsThreshold: 0.4

InferenceState:
  location: "src/contexts/InferenceContext.tsx"
  fields:
    checkpoints: "Checkpoint[]"
    loadingCheckpoints: "boolean"
    retryCount: "number"
    selectedCheckpoint: "string | null"
    inferenceOptions: "InferenceOptions"

InferenceActions:
  location: "src/contexts/InferenceContext.tsx"
  methods:
    setSelectedCheckpoint: "(path: string | null) => void"
    updateInferenceOptions: "(opts: Partial<InferenceOptions>) => void"
    refreshCheckpoints: "() => Promise<void>"

Checkpoint:
  location: "src/api/ocrClient.ts"
  fields:
    path: "string"
    name: "string"
    sizeKb: "number"
    modified: "string"
    epoch: "number | null"
    step: "number | null"
    metrics: "{ precision: number; recall: number; hmean: number } | null"

# Frontend-Backend Alignment
# InferenceOptions -> InferenceRequest mapping:
mapping:
  frontend_to_backend:
    confidenceThreshold: "confidence_threshold"
    nmsThreshold: "nms_threshold"
    enablePerspectiveCorrection: "enable_perspective_correction"
    displayMode: "perspective_display_mode"
    enableGrayscale: "enable_grayscale"
    enableBackgroundNormalization: "enable_background_normalization"
    enableSepiaEnhancement: "enable_sepia_enhancement"
