{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://experiment_manager.local/schemas/eds-v1.0.json",
  "title": "Experiment Documentation Standard (EDS) v1.0 Validation Schema",
  "description": "JSON Schema for validating experiment artifact YAML frontmatter",
  "type": "object",
  "required": [
    "ads_version",
    "type",
    "experiment_id",
    "status",
    "created",
    "updated",
    "tags"
  ],
  "properties": {
    "ads_version": {
      "type": "string",
      "pattern": "^[0-9]+\\.[0-9]+$",
      "description": "EDS/ADS version number (e.g., '1.0')"
    },
    "type": {
      "type": "string",
      "enum": [
        "assessment",
        "report",
        "guide",
        "script",
        "manifest"
      ],
      "description": "Artifact document type"
    },
    "experiment_id": {
      "type": "string",
      "pattern": "^[0-9]{8}_[0-9]{6}_[a-z0-9_]+$",
      "description": "Experiment identifier (YYYYMMDD_HHMMSS_name)"
    },
    "status": {
      "type": "string",
      "enum": [
        "draft",
        "active",
        "complete",
        "deprecated"
      ],
      "description": "Artifact lifecycle status"
    },
    "created": {
      "type": "string",
      "format": "date-time",
      "description": "Creation timestamp (ISO8601)"
    },
    "updated": {
      "type": "string",
      "format": "date-time",
      "description": "Last update timestamp (ISO8601)"
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^[a-z0-9-]+$"
      },
      "minItems": 1,
      "description": "Lowercase hyphenated tags"
    },
    "phase": {
      "type": "string",
      "enum": [
        "phase_0",
        "phase_1",
        "phase_2",
        "phase_3",
        "phase_4"
      ],
      "description": "Experiment phase (required for assessments)"
    },
    "priority": {
      "type": "string",
      "enum": [
        "critical",
        "high",
        "medium",
        "low"
      ],
      "description": "Priority level (required for assessments)"
    },
    "evidence_count": {
      "type": "integer",
      "minimum": 0,
      "description": "Number of evidence samples (required for assessments)"
    },
    "metrics": {
      "type": "object",
      "description": "Quantitative metrics object (required for reports)"
    },
    "baseline": {
      "type": "string",
      "pattern": "^[0-9]{8}_[0-9]{6}_[a-z0-9_]+$",
      "description": "Baseline experiment ID (required for reports)"
    },
    "comparison": {
      "type": "string",
      "enum": [
        "improvement",
        "regression",
        "neutral"
      ],
      "description": "Comparison result (required for reports)"
    },
    "commands": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "minItems": 1,
      "description": "Command sequence (required for guides)"
    },
    "prerequisites": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Prerequisites (required for guides)"
    },
    "dependencies": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Package dependencies (required for scripts)"
    }
  },
  "allOf": [
    {
      "if": {
        "properties": {
          "type": {
            "const": "assessment"
          }
        }
      },
      "then": {
        "required": [
          "phase",
          "priority",
          "evidence_count"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "type": {
            "const": "report"
          }
        }
      },
      "then": {
        "required": [
          "metrics",
          "baseline",
          "comparison"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "type": {
            "const": "guide"
          }
        }
      },
      "then": {
        "required": [
          "commands",
          "prerequisites"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "type": {
            "const": "script"
          }
        }
      },
      "then": {
        "required": [
          "dependencies"
        ]
      }
    }
  ],
  "additionalProperties": true
}
